<html>
  <head>
    <meta charset='utf-8'>
    <meta name='viewport' content='width=device-width, initial-scale=1, shrink-to-fit=no'>
    <meta http-equiv='x-ua-compatible' content='ie=edge'>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <!-- IMPORTANT: No CSS link needed as of v1 - It's all inlined -->
    <!-- Pre v1.0.0 versions need the minified css -->
    <!-- <link rel='stylesheet' href='https://unpkg.com/v-calendar/lib/v-calendar.min.css'> -->
  </head>
  <body>
    <div id='app'>
     
      <v-calendar @dayclick="onDayClickHandler" is-expanded></v-calendar>
      9
    </div>

    <script src='https://unpkg.com/vue@2.7.14/dist/vue.js'></script>
    <script src='https://unpkg.com/v-calendar'></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

    <script>
      new Vue({
        el: '#app',
        data: {
          selectedDate: null,
          texto: 'Info inicial'
        },
        created: function () {
          let uri = window.location.search.substring(1); 
          let params = new URLSearchParams(uri);
          let token = params.get("token");
          
          const axios = require('axios');
          axios.get('http://desarrollo.tlsi.es:8080/api/events/external', {
            params: { token }
          })
            .then(function (response) {
              console.log(response);
            })
            .catch( function(error) {
              console.log(error);
            });

          
        },
        methods: {
          onDayClickHandler(date){
            window.Telegram.WebApp.sendData(JSON.stringify("WEB_DAY_" + date.id));
          }
        }
      })

    </script>
  </body>
</html>